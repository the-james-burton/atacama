<div class="page-header">
	<a class="pull-right btn btn-primary" ng-click="addWidget()"><i class="glyphicon glyphicon-plus"></i> Add Widget</a>
	<a class="pull-right btn btn-warning" ng-click="clear()"><i class="glyphicon glyphicon-trash"></i> Clear</a>
	<h1 style="display: inline-block; width: 200px;">Dashboard</h1>
	<select class="form-control" style="width: 150px; margin-bottom: 20px; display:inline-block;" ng-change="changeDashboard()" ng-model="selectedDashboardId" ng-options="d.id as d.name for d in dashboards | object2Array | orderBy:'id'">
	</select>
</div>

<div gridster="gridsterOptions">
	<ul>
		<li gridster-item="widget" ng-repeat="widget in dashboard.widgets">
			<div class="box" ng-controller="CustomWidgetCtrl">
				<div class="box-header">
					<h3>{{ widget.name }}</h3>
					<div class="box-header-btns pull-right">
						<select class="dropdown-menu" style="width: 150px; margin-bottom: 20px; display:inline-block;"
							ng-change="selectSymbol()" ng-model="selectedSymbol" ng-options="symbol for symbol in symbols"></select>
						<a title="OHLC"       ng-click="addOHLC(widget)"><i class="glyphicon glyphicon-pencil"></i></a>
						<a title="indicators" ng-click="addIndicators(widget)"><i class="glyphicon glyphicon-random"></i></a>
						<a title="strategies" ng-click="addStrategies(widget)"><i class="glyphicon glyphicon-file"></i></a>

						<a title="settings"      ng-click="openSettings(widget)"><i class="glyphicon glyphicon-cog"></i></a>
						<a title="Remove widget" ng-click="remove(widget)"><i class="glyphicon glyphicon-trash"></i></a>
					</div>
				</div>
				<!-- TODO is there a better way of switching widget content than ng-if? -->
				<div ng-if="typeOHLC" class="box-content">
					<!-- <div ng-bind="message"></div> -->
					<nvd3 options='options' data='data' api="api"></nvd3>
				</div>
				<div ng-if="typeIndicators" class="box-content">
					<nvd3 options='options' data='data' api="api"></nvd3>
				</div>
				<div ng-if="typeStrategies" class="box-content">
					<p>not implemented</p>
				</div>
			</div>
		</li>
	</ul>
</div>
